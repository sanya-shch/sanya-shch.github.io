(this.webpackJsonpfirst=this.webpackJsonpfirst||[]).push([[0],{17:function(e,t,n){e.exports=n(29)},28:function(e,t,n){},29:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),l=n(9),r=n.n(l),u=n(1),c=function(e){for(var t,n,a={},o=[],l=0;l<e;l++)t="f".concat(Math.round(1e8*Math.random()).toString(16)),n=Math.round(999*Math.random()),a[t]={ID:t,Amount:n},o.push(t);return{rows:a,table:o}},s=function(e,t,n){for(var a=0,o=0;o<n;o++)a+=t[e[o]].Amount;return a},m=function(e){return{type:"SET_M",payload:e}},i=Object(u.b)((function(e){return{M:e.table.M,N:e.table.N,X:e.table.X}}),{setM:m,setX:function(e){return{type:"SET_X",payload:e}},setN:function(e){return{type:"SET_N",payload:e}},setTable:function(e,t){return function(n){for(var a,o=[],l={},r=0;r<e;r++)a=c(t),o.push(a.table),l=Object.assign(l,a.rows);n({type:"SET_TABLE",payload:{table:o,rows:l}});for(var u=[],m=0;m<e;m++)u.push(s(o[m],l,t));n({type:"SET_ROW_SUM",payload:u});var i=function(e,t,n,a){for(var o,l,r={},u=[],c=0;c<a;c++){o=0;for(var s=0;s<n;s++)o+=t[e[s][c]].Amount;r[l="f".concat(Math.round(1e8*Math.random()).toString(16))]={ID:l,Value:o},u.push(l)}return{columnArr:r,tableSumOfColumns:u}}(o,l,e,t),f=i.columnArr;n({type:"SET_COLUMN_SUM",payload:{tableSumOfColumns:i.tableSumOfColumns,columnArr:f}})}}})((function(e){var t=e.M,n=e.N,a=e.X,l=e.setM,r=e.setX,u=e.setN,c=e.setTable,s=function(e){switch(e.target.name){case"m":l(1*e.target.value);break;case"n":u(1*e.target.value);break;case"x":r(1*e.target.value)}};return o.a.createElement("form",{onSubmit:function(e){e.preventDefault(),c(t,n)},className:"form"},o.a.createElement("label",null,"M:",o.a.createElement("input",{type:"number",min:0,value:t,name:"m",onChange:s})),o.a.createElement("label",null,"N:",o.a.createElement("input",{type:"number",min:0,value:n,name:"n",onChange:s})),o.a.createElement("label",null,"X:",o.a.createElement("input",{type:"number",min:0,value:a,name:"x",onChange:s})),o.a.createElement("input",{type:"submit",value:"Build table"}))})),f=n(4),p=n(5),b=n(7),O=n(6),d=n(8),y=function(e,t){return e.table.rows[t].Amount},v=function(e,t){return Math.round(e.table.sumOfColumns[t].Value/e.table.M*100)/100},w=function(e,t){return e.table.sumOfRows&&e.table.sumOfRows.length>0?e.table.sumOfRows[t]:null},E=function(e,t){return e.table.arrayOfCloseValue[t]},h=function(e,t){return e.table.arrayOfRowPercent[t]},A=function(e){function t(){return Object(f.a)(this,t),Object(b.a)(this,Object(O.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(p.a)(t,[{key:"shouldComponentUpdate",value:function(e,t){return this.props.percentValue!==e.percentValue||(this.props.isClose!==e.isClose||this.props.cellAmount!==e.cellAmount)}},{key:"componentDidUpdate",value:function(e,t){console.log("componentDidUpdate")}},{key:"render",value:function(){var e=this.props,t=e.cellAmount,n=e.isClose,a=e.percentValue,l=e.onclick,r=e.onmouseover;return o.a.createElement("td",{className:"tableCell ".concat(n?"closeValue":""),onClick:l,onMouseOver:r},a?a.percent:t,a&&o.a.createElement("span",{className:"percent",style:{height:a.percent}}))}}]),t}(o.a.Component),C=Object(u.b)((function(e,t){return{cellAmount:y(e,t.item),isClose:E(e,t.item),percentValue:h(e,t.item)}}))(A),j=o.a.memo((function(e){var t=e.classnames,n=e.onclick,a=e.value;return o.a.createElement("td",{className:t,onClick:n},a)})),R=function(e){function t(){return Object(f.a)(this,t),Object(b.a)(this,Object(O.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(p.a)(t,[{key:"shouldComponentUpdate",value:function(e,t){return this.props.cellValue!==e.cellValue}},{key:"componentDidUpdate",value:function(e,t){console.log("componentDidUpdate")}},{key:"render",value:function(){var e=this.props.cellValue;return o.a.createElement("td",null,e)}}]),t}(o.a.Component),S=Object(u.b)((function(e,t){return{cellValue:v(e,t.value)}}))(R),g=function(e){function t(){return Object(f.a)(this,t),Object(b.a)(this,Object(O.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(p.a)(t,[{key:"shouldComponentUpdate",value:function(e,t){return this.props.sum!==e.sum}},{key:"componentDidUpdate",value:function(e,t){console.log("componentDidUpdate")}},{key:"render",value:function(){var e=this.props,t=e.sum,n=e.onmouseover,a=e.onmouseout;return o.a.createElement("td",{onMouseOver:n,onMouseOut:a},t)}}]),t}(o.a.Component),M=Object(u.b)((function(e,t){return{sum:w(e,t.value)}}))(g),_=Object(u.b)((function(e){return{table:e.table.table,tableSumOfColumns:e.table.tableSumOfColumns}}),{deleteRow:function(e){return function(t,n){for(var a=n().table,o=a.table,l=a.rows,r=a.sumOfRows,u=a.sumOfColumns,c=a.tableSumOfColumns,s=a.M,i=a.N,f=Object.assign({},l),p=Object.assign([],u),b=0;b<i;b++)p[c[b]].Value-=f[o[e][b]].Amount;var O=o.filter((function(t,n){return n!==e})),d=r.filter((function(t,n){return n!==e}));t(m(s-1)),t({type:"DELETE_ROW",payload:{newTable:O,newRow:f,rowArr:d,columnArr:p}})}},addRow:function(){return function(e,t){var n=t().table,a=n.table,o=n.rows,l=n.sumOfRows,r=n.sumOfColumns,u=n.tableSumOfColumns,i=n.M,f=n.N,p=Object.assign([],a),b=Object.assign({},o),O=c(f);p.push(O.table),b=Object.assign(b,O.rows);var d=Object.assign([],l);d.push(s(O.table,b,f));for(var y=Object.assign([],r),v=0;v<f;v++)y[u[v]].Value+=O.rows[O.table[v]].Amount;e(m(1*i+1)),e({type:"ADD_ROW",payload:{newTable:p,newRow:b,rowArr:d,columnArr:y}})}},addAmount:function(e,t,n){return function(a,o){var l=o().table,r=l.rows,u=l.sumOfRows,c=l.sumOfColumns,s=Object.assign({},r);s[n].Amount++;var m=Object.assign([],u);m[e]++;var i=Object.assign([],c);i[t].Value++,a({type:"ADD_AMOUNT",payload:{rows:s,rowArr:m,columnArr:i}})}},setRowPercentArr:function(e,t){return function(n,a){var o={};if(null!==e)for(var l=a().table.sumOfRows[e],r=a().table.rows,u=0;u<t.length;u++)o[t[u]]={percent:Math.round(100*r[t[u]].Amount/l*100)/100+"%"};n({type:"SET_ROW_PERCENT_ARR",payload:o})}},setCloseValue:function(e){return function(t,n){var a={};if(null!==e){var o=n().table,l=o.rows;a=function(e,t,n){for(var a,o=null,l=null,r=null,u=null,c=n.Amount,s=Object.values(e),m={},i=0;i<t;i++){for(var f=0;f<s.length;f++)if((a=s[f]).Amount<c&&(null===o||o.Amount<a.Amount))o=a,r=f;else if(a.Amount>c&&(null===l||l.Amount>a.Amount))l=a,u=f;else if(a.Amount===c){o=a,r=f;break}null!==o&&null!==l?Math.abs(o.Amount-c)<Math.abs(l.Amount-c)?(m[o.ID]=o,s.splice(r,1)):(m[l.ID]=l,s.splice(u,1)):null===o&&null!==l?(m[l.ID]=l,s.splice(u,1)):null!==o&&null===l&&(m[o.ID]=o,s.splice(r,1)),o=null,l=null,r=null,u=null}return m}(l,1*o.X,l[e])}t({type:"SET_CLOSE_VALUES_ARR",payload:a})}}})((function(e){var t=e.table,n=e.tableSumOfColumns,a=e.deleteRow,l=e.addRow,r=e.addAmount,u=e.setRowPercentArr,c=e.setCloseValue,s=function(){u(null)};return o.a.createElement("div",null,t.length>0&&o.a.createElement("table",{onMouseOut:function(){c(null)}},o.a.createElement("tbody",null,t.map((function(e,l){return o.a.createElement("tr",{key:"table-row-".concat(l)},e.map((function(e,t){return o.a.createElement(C,{key:"table-cell-".concat(e),onclick:function(){return function(e,t,a){r(e,n[t],a)}(l,t,e)},onmouseover:function(){c(e)},item:e})})),o.a.createElement(M,{onmouseover:function(){return function(e,t){u(e,t)}(l,t[l])},onmouseout:s,value:l}),o.a.createElement(j,{key:"del-btn-".concat(l),classnames:"delBtn",onclick:function(){return function(e){a(e)}(l)},value:"Delete"}))})),o.a.createElement("tr",null,n.map((function(e){return o.a.createElement(S,{key:"average-value-in-column-".concat(e),value:e})})),o.a.createElement(j,{classnames:"addBtn",onclick:function(){l()},value:"Add"})))))}));n(28);var T=function(){return o.a.createElement("div",{className:"App"},o.a.createElement(i,null),o.a.createElement(_,null))},k=n(3),D=n(15),N=n(16),V=n(2),U={table:[],rows:{},sumOfRows:[],tableSumOfColumns:[],sumOfColumns:{},arrayOfRowPercent:{},arrayOfCloseValue:{},M:0,N:0,X:0},W=Object(k.combineReducers)({table:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:U,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_M":return Object(V.a)({},e,{M:t.payload});case"SET_N":return Object(V.a)({},e,{N:t.payload});case"SET_X":return Object(V.a)({},e,{X:t.payload});case"SET_CLOSE_VALUES_ARR":return Object(V.a)({},e,{arrayOfCloseValue:t.payload});case"SET_TABLE":return Object(V.a)({},e,{rows:t.payload.rows,table:t.payload.table});case"SET_ROW_SUM":return Object(V.a)({},e,{sumOfRows:t.payload});case"SET_COLUMN_SUM":return Object(V.a)({},e,{sumOfColumns:t.payload.columnArr,tableSumOfColumns:t.payload.tableSumOfColumns});case"DELETE_ROW":return Object(V.a)({},e,{rows:t.payload.newRow,table:t.payload.newTable,sumOfRows:t.payload.rowArr,sumOfColumns:t.payload.columnArr});case"ADD_ROW":return Object(V.a)({},e,{rows:t.payload.newRow,table:t.payload.newTable,cells:t.payload.cells,sumOfRows:t.payload.rowArr,sumOfColumns:t.payload.columnArr});case"ADD_AMOUNT":return Object(V.a)({},e,{rows:t.payload.rows,sumOfRows:t.payload.rowArr,sumOfColumns:t.payload.columnArr});case"SET_ROW_PERCENT_ARR":return Object(V.a)({},e,{arrayOfRowPercent:t.payload});default:return e}}}),X=[D.a],L=Object(k.createStore)(W,{},Object(N.composeWithDevTools)(k.applyMiddleware.apply(void 0,X)));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(o.a.createElement(u.a,{store:L},o.a.createElement(T,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[17,1,2]]]);
//# sourceMappingURL=main.fca6d8d6.chunk.js.map